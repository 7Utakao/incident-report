import{C as i}from"./f9QzHCjA.js";import{B as x}from"./0OkAVhSL.js";import{B as b}from"./DhJe92nY.js";import{S as _}from"./CA6Ea30x.js";import{e as B,M as I,r as m,f as V,u as $,i as j,c as d,a as e,m as u,b as a,w as o,E as g,o as n,d as c,t as r,F as M,j as N}from"./BBGXoVXL.js";import{u as D}from"./CdiFBCIm.js";import{f as E,j as F}from"./C3bHKmRd.js";import"./Dzv0W22B.js";const H={class:"min-h-screen bg-background"},R={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},S={class:"mb-8"},z={class:"flex items-center space-x-4 mb-4"},L={key:0,class:"space-y-6"},T={class:"space-y-4"},U={key:1,class:"text-center py-12"},q={key:2,class:"space-y-6"},G={class:"space-y-4"},J={class:"flex items-start justify-between"},K={class:"flex-1"},O={class:"text-2xl font-bold text-secondary mb-2"},P={class:"flex items-center space-x-4 text-sm text-gray"},Q={class:"flex items-center space-x-2"},W={class:"text-secondary leading-relaxed"},X={class:"prose prose-sm max-w-none"},Y={class:"whitespace-pre-wrap text-secondary leading-relaxed"},Z={class:"flex flex-wrap gap-2"},tt={class:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"},et={class:"ml-2 text-gray"},st={class:"ml-2 text-gray"},at={key:0},ot={class:"ml-2 text-gray"},rt={key:1},lt={class:"ml-2 text-gray"},xt=B({__name:"[id]",setup(nt){const h=I().params.id,v=m(!0),y=m(!1),s=m(null),k=m("user-123"),w=l=>({"情報漏洩・誤送信":"error",システム障害:"warning",作業ミス:"primary",コミュニケーション:"secondary",その他:"default"})[l]||"default",f=l=>E(new Date(l),"yyyy年MM月dd日 HH:mm",{locale:F}),A=()=>{console.log("Edit report:",h)},C=async()=>{try{v.value=!0,y.value=!1;const{reports:l}=D(),t=await l.get(h);s.value={id:t.reportId,title:t.title||"無題",summary:t.summary||t.body?.substring(0,100)+"..."||"",body:t.body,category:t.category,tags:t.tags||[],createdAt:t.createdAt,updatedAt:t.createdAt,author:"ユーザー",userId:t.userId,pointsAwarded:0}}catch(l){console.error("Failed to fetch report:",l),y.value=!0}finally{v.value=!1}};return V(()=>{C()}),$({title:j(()=>s.value?`${s.value.title} - 報告詳細`:"報告詳細 - 報告システム")}),(l,t)=>(n(),d("div",H,[e("div",R,[e("div",S,[e("div",z,[a(x,{variant:"ghost",onClick:t[0]||(t[0]=p=>l.$router.back())},{default:o(()=>t[2]||(t[2]=[c(" ← 戻る ",-1)])),_:1,__:[2]})]),t[3]||(t[3]=e("h1",{class:"text-3xl font-bold text-secondary"},"報告詳細",-1))]),v.value?(n(),d("div",L,[a(i,null,{default:o(()=>[e("div",T,[a(_,{variant:"text",width:"60%",height:"32"}),a(_,{variant:"text",width:"40%",height:"24"}),a(_,{variant:"rectangular",width:"100%",height:"200"})])]),_:1})])):y.value?(n(),d("div",U,[t[5]||(t[5]=e("div",{class:"text-6xl mb-4"},"😕",-1)),t[6]||(t[6]=e("h2",{class:"text-xl font-semibold text-secondary mb-2"},"報告が見つかりませんでした",-1)),t[7]||(t[7]=e("p",{class:"text-gray mb-6"},"指定された報告は存在しないか、削除された可能性があります。",-1)),a(x,{variant:"primary",onClick:t[1]||(t[1]=p=>l.$router.push("/reports"))},{default:o(()=>t[4]||(t[4]=[c("報告一覧に戻る",-1)])),_:1,__:[4]})])):s.value?(n(),d("div",q,[a(i,null,{default:o(()=>[e("div",G,[e("div",J,[e("div",K,[e("h2",O,r(s.value.title),1),e("div",P,[e("span",null,"作成者: "+r(s.value.author),1),t[8]||(t[8]=e("span",null,"•",-1)),e("span",null,r(f(s.value.createdAt)),1)])]),e("div",Q,[a(b,{variant:w(s.value.category)},{default:o(()=>[c(r(s.value.category),1)]),_:1},8,["variant"]),s.value.userId===k.value?(n(),g(x,{key:0,variant:"primary",size:"sm",onClick:A},{default:o(()=>t[9]||(t[9]=[c(" 編集 ",-1)])),_:1,__:[9]})):u("",!0)])])])]),_:1}),a(i,{title:"要約"},{default:o(()=>[e("p",W,r(s.value.summary),1)]),_:1}),a(i,{title:"詳細内容"},{default:o(()=>[e("div",X,[e("div",Y,r(s.value.body),1)])]),_:1}),s.value.tags&&s.value.tags.length>0?(n(),g(i,{key:0,title:"タグ"},{default:o(()=>[e("div",Z,[(n(!0),d(M,null,N(s.value.tags,p=>(n(),g(b,{key:p,variant:"outline",size:"sm"},{default:o(()=>[c(r(p),1)]),_:2},1024))),128))])]),_:1})):u("",!0),a(i,{title:"詳細情報"},{default:o(()=>[e("div",tt,[e("div",null,[t[10]||(t[10]=e("span",{class:"font-medium text-secondary"},"カテゴリ:",-1)),e("span",et,r(s.value.category),1)]),e("div",null,[t[11]||(t[11]=e("span",{class:"font-medium text-secondary"},"作成日時:",-1)),e("span",st,r(f(s.value.createdAt)),1)]),s.value.updatedAt!==s.value.createdAt?(n(),d("div",at,[t[12]||(t[12]=e("span",{class:"font-medium text-secondary"},"更新日時:",-1)),e("span",ot,r(f(s.value.updatedAt)),1)])):u("",!0),s.value.pointsAwarded?(n(),d("div",rt,[t[13]||(t[13]=e("span",{class:"font-medium text-secondary"},"獲得ポイント:",-1)),e("span",lt,r(s.value.pointsAwarded)+" pt",1)])):u("",!0)])]),_:1})])):u("",!0)])]))}});export{xt as default};
